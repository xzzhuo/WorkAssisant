
<#include "template_header.html">

<script type="text/javascript">
$(document).ready(function(){

	delete_item = function(role_uuid, account_uuid)
	{
		$.post("role_list.html",
		{
			act			: "act_role_delete",
			role_uuid	: role_uuid,
			account_uuid: account_uuid,
			random		: Math.random()
		},
		function(data, status)
		{
			if (status == "success")
	    	{
	    		var div_table = null;
	    		try
	    		{
	    			div_table = $(data).find("div.ajax-table");
	    		}
	    		catch(e)
	    		{
	    		
	    		}
	    		if (div_table != null)
	    		{
	    			$("div.ajax-table").html(div_table.html());
	    			refresh_table($("#dataTables"));
	    		}
	    		else
	    		{
	    			var retval = JSON.parse(data);
	    			alert(retval.message);
	    		}
	    	}
		})
	}
	
}); 
</script>

	<#include "template_menu.html">

	<div id="page-wrapper">
        <div class="row">
            <div class="col-lg-12">
                <h4 class="page-header">${LANG["lang_role_manage"]}</h4>
            </div>
            <!-- /.col-lg-12 -->
        </div>
        <!-- /.row -->
        <div class="row">
            <div class="col-lg-12">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        ${LANG["lang_role_list"]}
                    </div>
                    <!-- /.panel-heading -->
                    <div class="panel-body">
                        <div class="dataTable_wrapper">
                        	<div class="ajax-table" id="table-list">
								<table class="table table-striped table-bordered table-hover" id="dataTables">
	                                <thead>
	                                    <tr>
	                                        <th>${LANG["lang_id"]}</th>
	                                        <th>${LANG["lang_role_name"]}</th>
	                                        <th>${LANG["lang_role_type"]}</th>
	                                        <th>${LANG["lang_role_leader"]}</th>
	                                        <th>${LANG["lang_visible"]}</th>
	                                        <th>${LANG["lang_access"]}</th>
	                                        <th>${LANG["lang_censorship"]}</th>
	                                        <th>${LANG["lang_member_count"]}</th>
	                                        <th>${LANG["lang_creater"]}</th>
	                                        <th>${LANG["lang_create_date"]}</th>
	                                        <th>${LANG["lang_operation"]}</th>
	                                    </tr>
	                                </thead>
	                                <tbody>
<#if list??>
<#list list as item>
	                                    <tr class="odd gradeX">
	                                        <td>${item.id}</td>
	                                        <td>${item.name}</td>
	                                        <td>${template_type_map[item.type]!LANG["lang_unknown"]}</td>
	                                        <!-- leader count maybe not exist -->
	                                        <td>${account_map[item.leader_uuid]!""}</td>
	                                        <td>${LANG[item.visible]!LANG["lang_unknown"]}</td>
	                                        <td>${LANG[item.access]!LANG["lang_unknown"]}</td>
	                                        <td>${LANG[item.censorship]!LANG["lang_unknown"]}</td>
	                                        <td>${member_count_map[item.uuid]!"0"}</td>
	                                        <td>${account_map[item.creater_uuid]!""}</td>
	                                        <td>${item.create_date?string("yyyy-MM-dd HH:mm:ss")}</td>
	                                        <td>
	                                        	<a href="member_list_select.html?act=menu_member_update&role_uuid=${item.uuid}" ><p class="fa fa-group"> ${LANG["lang_member_manage"]} </p></a>
	                                        	<a href="role_leader_change.html?act=menu_change_leader&role_uuid=${item.uuid}"><p class="fa fa-user-md"> ${LANG["lang_change_leader"]} </p></a>
	                                        	<a href="javascript:void(0)" onclick="delete_item('${item.uuid}', '${account_uuid}')"><p class="fa fa-trash-o"> ${LANG["lang_delete"]} </p></a>
	                                        </td>
	                                    </tr>
</#list>
</#if>
	                                </tbody>
	                            </table>
	                        </div>
						</div>
                        <!-- /.table-responsive -->
                        <div class="well">
                        	<div class="tablearea-set" style="text-align:right;">
                            	<a class="btn btn-outline btn-primary" href="role_add.html?act=menu_add_role">${LANG["lang_role_add"]}</a>
                            </div>
                        </div>
                    </div>
                    <!-- /.panel-body -->
                </div>
                <!-- /.panel -->
            </div>
            <!-- /.col-lg-12 -->
        </div>
        <!-- /.row -->

    </div>
    <!-- /#page-wrapper -->

<#include "template_footer.html">

<!-- Page-Level account Scripts - Tables - Use for reference -->
<script type="text/javascript">
$(document).ready(function() {

    refresh_table($("#dataTables"));
});
</script>